<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300..700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="tracker2ndpage.css">
</head>
<body>

    <div class="header">
        <h3 class="m-0">Expense,<br>Tracker <img src="assets/purse.jpeg" alt="purse" width="30px"></h3>
    </div>

    <div class="input-form">
        <div class="form-floating inputs">
            <input type="date" class="form-control date-input" id="floatingInput" placeholder="name@example.com">
            <label for="floatingInput">Date</label>
        </div>

        <div class="form-floating inputs">
            <input type="email" class="form-control amount-input" id="floatingInput" placeholder="name@example.com">
            <label for="floatingInput">Amount</label>
        </div>

        <select class="form-select form-select-lg inputs transaction-input" aria-label="Large select example">
            <option selected>Transaction Type</option>
            <option value="income">Income</option>
            <option value="expense">Expense</option>
        </select>

        <button class="add-btn" onclick="addRow()">+</button>
    </div>

        <div class="cards mt-5">

                <div class="card" style="width: 18rem;">
                    <div class="card-body">
                        <h5 class="card-title">Total Income <img src="assets/totalincomepurseicon.avif" alt="total-income-icon" width="30px"></h5>
                        <h3 class="card-subtitle mb-2"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-currency-rupee" viewBox="0 0 16 16">
                            <path d="M4 3.06h2.726c1.22 0 2.12.575 2.325 1.724H4v1.051h5.051C8.855 7.001 8 7.558 6.788 7.558H4v1.317L8.437 14h2.11L6.095 8.884h.855c2.316-.018 3.465-1.476 3.688-3.049H12V4.784h-1.345c-.08-.778-.357-1.335-.793-1.732H12V2H4z"/></svg><span id="ti">0</span></h3>
                    </div>
                </div>

                <div class="card" style="width: 18rem;">
                    <div class="card-body">
                        <h5 class="card-title">Total Expenses <img src="assets/totalincomepurseicon.avif" alt="" width="30px"></h5>
                        <h3 class="card-subtitle mb-2"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-currency-rupee" viewBox="0 0 16 16">
                            <path d="M4 3.06h2.726c1.22 0 2.12.575 2.325 1.724H4v1.051h5.051C8.855 7.001 8 7.558 6.788 7.558H4v1.317L8.437 14h2.11L6.095 8.884h.855c2.316-.018 3.465-1.476 3.688-3.049H12V4.784h-1.345c-.08-.778-.357-1.335-.793-1.732H12V2H4z"/></svg><span id="te">0</span></h3>
                    </div>
                </div>

                <div class="card" style="width: 18rem;">
                    <div class="card-body">
                        <h5 class="card-title">Balance <img src="assets/totalincomepurseicon.avif" alt="balance-icon" width="30px"></h5>
                        <h3 class="card-subtitle mb-2"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-currency-rupee" viewBox="0 0 16 16">
                            <path d="M4 3.06h2.726c1.22 0 2.12.575 2.325 1.724H4v1.051h5.051C8.855 7.001 8 7.558 6.788 7.558H4v1.317L8.437 14h2.11L6.095 8.884h.855c2.316-.018 3.465-1.476 3.688-3.049H12V4.784h-1.345c-.08-.778-.357-1.335-.793-1.732H12V2H4z"/></svg><span id="ba">0</span></h3>
                    </div>
                </div>
        </div>

        <table class="transaction-table" id="transaction-table">
            <tr id="header-row">
                <th>Amount</th>
                <th>Transaction Type</th>
                <th>Transaction Date</th>
                <th>Action</th>
            </tr>

            <!-- rows will be added dynamically -->

        </table>
        
        <script>

            let transactionTable=document.getElementById("transaction-table");
            // console.log(transactionTable);


            function addRow(){
            let date=document.getElementsByClassName("date-input")[0].value 
            let amount=document.getElementsByClassName("amount-input")[0].value
            let transactionValue=document.getElementsByClassName("transaction-input")[0].value

            // console.log(date,amount,transactionValue);

            let row=document.createElement("tr");


            let amountCell=document.createElement("td");
            amountCell.innerText=amount;

            let  transactionCell=document.createElement("td");
            transactionCell.innerText=transactionValue;

            let dateCell=document.createElement("td");
            dateCell.innerText=date;

            let binCell=document.createElement("td");

            let deleteBtn=document.createElement("button");
            deleteBtn.style.border="none";
            deleteBtn.style.background="white";
            binImg=document.createElement("img");
            binImg.src="assets/deletebutton.jpg";
            binImg.style.width="25px";
            binImg.style.height="25px";
            binImg.style.border="none";
            binImg.style.borderRadius="5px";
            deleteBtn.appendChild(binImg);
            binCell.appendChild(deleteBtn);
            deleteBtn.onclick=()=>deleteRow(row);


            // console.log(amountCell,dateCell,transactionCell);
            
            row.appendChild(amountCell);
            row.appendChild(transactionCell);
            row.appendChild(dateCell);
            row.appendChild(binCell);

            transactionTable.appendChild(row);
            
            // upto line 127 is the function for adding the row into the table.


            // changing the values in the cards when there is a value in input form.

            let totalIncome=document.getElementById("ti").innerText;
            let totalExpense=document.getElementById("te").innerText;
            let balance=document.getElementById("ba").innerText;

            console.log(balance);
            // console.log(totalIncome,totalExpense,balance);

            if(transactionValue=="income"){
                if(totalIncome=="0"){
                    document.getElementById("ti").innerText=amount;
                }
                else{
                    document.getElementById("ti").innerText=parseInt(totalIncome)+parseInt(amount);
                }

                if(balance=="0"){
                    document.getElementById("ba").innerText=amount;
                }
                else{
                    document.getElementById("ba").innerText=parseInt(balance)+parseInt(amount);
                }
            }
            else if(transactionValue=="expense"){
                if(totalExpense=="0"){
                    document.getElementById("te").innerText=amount;
                }
                else{
                    document.getElementById("te").innerText=parseInt(totalExpense)+parseInt(amount);
                }

                if(balance=="0"){
                    document.getElementById("ba").innerText=amount;
                }
                else{
                    document.getElementById("ba").innerText=parseInt(balance)-parseInt(amount);
                }
            }

            }

            // now write the function for deleting the row.

            function deleteRow(row){
                // console.log("hi am chandra")
                // console.log(row);

                row.remove();
            }


        </script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
</body>
</html>
